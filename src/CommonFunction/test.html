
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
       <style>
          .square{
                width: 10vw;
                height: 10vw;
                background-color: antiquewhite;
          }
    </style>
</head>
<body>
      <div>
            <p>Test one.</p>
            <div class="square"></div>
      </div>
    <script>
        let arrOne=[1,231,1,2,3,1,1,5,5,4,0]
            /**
             * 链式调用
             */
            function A(){
                console.log('A');
                this.task=[]
                let that=this
                let fn=(function(){
                    return function(){
                        that.next()
                    }
                })
                this.task.push(fn)
                setTimeout(() => {
                    that.next()
                }, 0);
            }
            A.prototype={
                next:function(){
                    var fn=this.task.shift()
                    fn && fn()
                },
                eat:function(){
                    let that=this
                    let fn=(function() {
                        return function () {
                            setTimeout(() => {
                                console.log('prototype-eat-new');
                                that.next()
                            }, 1000);
                        }
                    })
                    this.task.push(fn)
                    return this
                },
                color:'red',
                get:function(){
                    let that=this
                    console.log(that.task);
                    return this
                }
            }
            
      //     let B=new A()
      //     B.eat().get()
      //     let C=(function(str){
      //         console.log('C',str);
      //     })
       

        /*
        数组去重
        indexOf
        new Set(arr)
        includes
        */
       
      const unique={
          indexOfFun:function(arr){
            if(! arr instanceof Array){
            return false
            }
                let array=[]
                for(let i=0;i<arr.length;i++){
                    if(array.indexOf(arr[i])===-1){
                        array.push(arr[i])
                    }
                }
               
                return array;
          },
          setFun:function(arr){
              return new Set(arr);
          },
          includesFun:function(arr){
            if(! arr instanceof Array){
            return false
            }
            let newArr=[]
            for(let i=0;i<arr.length;i++){
                if(! newArr.includes(arr[i])){
                    newArr.push(arr[i])
                }
                
            }
            console.log(newArr)
            return newArr
          }
      }

     unique.setFun(arrOne)
     
      /*
        数组扁平化方法
        递归
        ...运算符
        es6的arr.flat(Infinity)
        */
      
     const flatFun={
         extendsFun:function(arr){
            if(!arr instanceof Array){
               return false
           }
         while(arr.some(Array.isArray)){
            arr=[].concat(...arr)
         }
         console.log(arr);
         },
         flatInFun:function(arr){
            if(!arr instanceof Array){
               return false
            }
             return arr.falt(Infinity)
         }
     }
      /*
      数组排序
        冒泡排序
      */
     const sortFun={
        bubbling: function (array) {
        const { length } = array;
        for (let i = 0; i < length; i++) {
            for (let j = 0; j < length - 1 - i; j++) {
            if (array[j] > array[j + 1]) {
                [array[j + 1], array[j]] = [array[j], array[j + 1]]
            }
            }
        }
            console.log(array);
             return array;
         },
     }
    
     async function A(){
         console.log('A');
          new Promise((resolve, reject) => {
              setTimeout(function () {
                console.log('时间到了')
                resolve('11') 
                console.log('22')
            }, 1000)
            console.log('33')
            }).then((data) => {
            console.log(data)
            })
            console.log('hhh')
            await function a(){
                  if(1>2) 
                  return;
            }
     }
//      A()
     console.log('B');
     sortFun.bubbling(unique.indexOfFun(arrOne))
     /*
     数组去重以及找出唯一的
      */
     const operArray1={
         one:function(arr1,arr2){
            let arrNew=[...arr1,...arr2]
            let arrUnique=[]
            for(let i=0;i<arrNew.length;i++){
                if(arrNew.indexOf(arrNew[i])===arrNew.lastIndexOf(arrNew[i])){
                    arrUnique.push(arrNew[i])
                }
            }
            return arrUnique
         }
     }
     console.log(operArray1.one([1,2,3],[1,3,4]));

     let p = new Promise((resolve,reject) => {
      setTimeout(() => {
            reject('error');
      },1000);
      });
            const ccc= { testFun:function(){
                  if(4>3) {
                
                  return false}
            }}
async function demo(params) {
    try {
         await ccc.testFun()
           
        let result = await p;
        
    }catch(e) {
        console.log(e);
    }
}

demo();
    </script>
    <script>
          var a='a',
              b='b'
              function A(a){
                    debugger
                        console.log(a,'a')
                    A=function(b){
                          console.log('====a',a,'=====b',b)
                         alert(a+ b++)
                         console.log('--------a',a,'-------b',b)
                    }
                  alert(a++)
                     console.log(a,'---a')
              }
              A(3)
              console.log('OVER')
              A(2)
              console.log('over----')
              A(4)
              console.log('over---5')
              A(5)

    </script>
 
</body>
</html>