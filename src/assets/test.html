<div>
  <div>
    <span>begin-end-time</span>

    <input type="text" value="123213">

    <span>----</span>

    <input type="text" value="123213213">

    <span>1231</span>
    <input type="text" value='1232'>
    <button onclick="testOne()">click</button>
  </div>
</div>
<script>
  /*
  define a function
  */
  function LazyPig(namePig) {
    return new Lazy(namePig)
  }
  /*
  define a prototype function
  */
  function Lazy(namePig) {
    this.namePig = namePig;
    this.task = [];
    console.log('Hello,' + namePig);
    let that = this;//that 指向当前Lazy
    let fn = (function () {
      return function () {
        that.next()//调用Lazy中prototype中的方法
      }
    })()
    this.task.push(fn)
    setTimeout(() => {
      that.next()
    }, 0)
  }
  Lazy.prototype = {
    next: function () {
      var fn = this.task.shift()
      fn && fn()
    },
    sleep: function (timer) {
      let that = this;
      let fn = (function (timer) {
        return function () {
          setTimeout(() => {
            console.log(that.namePig + 'wake up!');
            that.next()
          }, timer * 1000)
        }
      })(timer)
      this.task.push(fn)
      return this;
    },
    eat: function (str) {
      let that = this;
      let fn = (function (str) {
        return function () {
          console.log(that.namePig + 'is eadting' + str);
          that.next()
        }
      })(str)
      this.task.push(fn);
      return this;
    }
  }
  function testOne() {
    LazyPig('jackpig').sleep(3).eat('pig')
  }
</script>